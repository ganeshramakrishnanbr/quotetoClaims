<div class="customer-insights-container" [@pageTransition]>
  <div class="dashboard-header">
    <h2>Customer Insights Dashboard</h2>
    <div class="dashboard-actions">
      <button mat-icon-button (click)="onRefresh()" aria-label="Refresh data">
        <mat-icon>refresh</mat-icon>
      </button>
    </div>
  </div>

  <div class="dashboard-grid">
    <!-- Customer Satisfaction Chart -->
    <div class="dashboard-card">
      <mat-card>
        <mat-card-header>
          <mat-card-title>Customer Satisfaction</mat-card-title>
          <mat-card-subtitle>Satisfaction score trends over time</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <ngx-charts-line-chart
            [view]="view"
            [scheme]="colorScheme"
            [results]="customerSatisfactionData"
            [gradient]="true"
            [xAxis]="true"
            [yAxis]="true"
            [legend]="true"
            [showXAxisLabel]="true"
            [showYAxisLabel]="true"
            xAxisLabel="Month"
            yAxisLabel="Satisfaction Score"
            (select)="onSelect($event)">
          </ngx-charts-line-chart>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Retention Rate Chart -->
    <div class="dashboard-card">
      <mat-card>
        <mat-card-header>
          <mat-card-title>Retention Rate</mat-card-title>
          <mat-card-subtitle>Policy renewal rates by product</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <ngx-charts-bar-horizontal
            [view]="view"
            [scheme]="colorScheme"
            [results]="retentionRateData"
            [gradient]="false"
            [xAxis]="true"
            [yAxis]="true"
            [legend]="true"
            [showXAxisLabel]="true"
            [showYAxisLabel]="true"
            xAxisLabel="Retention Rate (%)"
            yAxisLabel="Product"
            (select)="onSelect($event)">
          </ngx-charts-bar-horizontal>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Customer Demographics Chart -->
    <div class="dashboard-card">
      <mat-card>
        <mat-card-header>
          <mat-card-title>Customer Demographics</mat-card-title>
          <mat-card-subtitle>Customer distribution by segment</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <ngx-charts-advanced-pie-chart
            [view]="view"
            [scheme]="colorScheme"
            [results]="customerDemographicsData"
            [gradient]="true"
            (select)="onSelect($event)">
          </ngx-charts-advanced-pie-chart>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Feedback Trends Chart -->
    <div class="dashboard-card">
      <mat-card>
        <mat-card-header>
          <mat-card-title>Feedback Trends</mat-card-title>
          <mat-card-subtitle>Sentiment analysis of customer feedback</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <ngx-charts-area-chart-stacked
            [view]="view"
            [scheme]="colorScheme"
            [results]="feedbackTrendsData"
            [gradient]="true"
            [xAxis]="true"
            [yAxis]="true"
            [legend]="true"
            [showXAxisLabel]="true"
            [showYAxisLabel]="true"
            xAxisLabel="Month"
            yAxisLabel="Volume"
            (select)="onSelect($event)">
          </ngx-charts-area-chart-stacked>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
